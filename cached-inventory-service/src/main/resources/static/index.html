<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>UbInventory - DEMO</title>
	<style>
		body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #1a1a1a; color: #e0e0e0; max-width: 960px; margin: 40px auto; padding: 20px; }
		h1, h2 { color: #76d9e6; border-bottom: 1px solid #444; padding-bottom: 10px; }
		.container { display: flex; gap: 20px; margin-bottom: 20px; }
		.column { flex: 1; }
		input, textarea, button { width: 100%; box-sizing: border-box; padding: 12px; margin-bottom: 15px; border-radius: 4px; border: 1px solid #555; background-color: #2c2c2c; color: #e0e0e0; font-size: 14px; }
		textarea { resize: vertical; min-height: 200px; font-family: monospace; }
		button { background-color: #007bff; cursor: pointer; font-weight: bold; }
		button:hover { background-color: #0056b3; }
		#btn-delete { background-color: #dc3545; }
		#btn-delete:hover { background-color: #b02a37; }
		#response-container { display: flex; gap: 20px; background-color: #2c2c2c; padding: 15px; border-radius: 5px; }
		#response-status { flex: 0 0 120px; font-weight: bold; }
		#response-body { flex: 1; background-color: #1e1e1e; padding: 15px; border-radius: 4px; white-space: pre-wrap; word-wrap: break-word; font-family: monospace; }
		.status-ok { color: #28a745; }
		.status-created { color: #17a2b8; }
		.status-no-content { color: #6c757d; }
		.status-error { color: #dc3545; }
	</style>
</head>
<body>

	<h1>Inventory Control Panel</h1>

	<div class="container">
		<div class="column" id="inputs-column">
			<h2>Inputs</h2>
			<label for="player-id">Player ID</label>
			<input type="text" id="player-id" value="fmontser">
			
			<label for="json-body">JSON Body</label>
			<textarea id="json-body">{
				"playerId": "fmontser",
				"items": [
					{
						"itemId": "contract_scroll",
						"quantity": 0
					},
					{
						"itemId": "prove_of_worth",
						"quantity": 4
					}
				]
			}</textarea>
		</div>

		<div class="column" id="actions-column">
			<h2>Actions</h2>
			<button id="btn-get" onclick="getInventory()">GET Inventory</button>
			<button id="btn-post" onclick="createInventory()">POST Inventory</button>
			<button id="btn-put" onclick="updateInventory()">PUT Inventory</button>
			<button id="btn-delete" onclick="deleteInventory()">DELETE Inventory</button>
		</div>
	</div>
		
	<div>
		<h2>Server Response</h2>
		<div id="response-container">
			<div id="response-status">Status...</div>
			<pre id="response-body">Response body will appear here...</pre>
		</div>
	</div>

	<script>
		const API_BASE_URL = '/api/v1/inventories';

		async function getInventory() {
			const playerId = document.getElementById('player-id').value;
			if (!playerId) { return alert('Player ID is required.'); }
			const response = await fetch(`${API_BASE_URL}/${playerId}`);
			handleResponse(response);
		}

		async function deleteInventory() {
			const playerId = document.getElementById('player-id').value;
			if (!playerId) { return alert('Player ID is required.'); }
			const response = await fetch(`${API_BASE_URL}/${playerId}`, { method: 'DELETE' });
			handleResponse(response);
		}
		
		async function createInventory() {
			const body = document.getElementById('json-body').value;
			if (!body) { return alert('JSON Body is required.'); }
			const response = await fetch(API_BASE_URL, {
				method: 'POST',
				headers: { 'Content-Type': 'application/json' },
				body: body
			});
			handleResponse(response);
		}

		async function updateInventory() {
			const playerId = document.getElementById('player-id').value;
			const body = document.getElementById('json-body').value;
			if (!playerId || !body) { return alert('Player ID and JSON Body are required.'); }
			const response = await fetch(`${API_BASE_URL}/${playerId}`, {
				method: 'PUT',
				headers: { 'Content-Type': 'application/json' },
				body: body
			});
			handleResponse(response);
		}

		async function handleResponse(response) {
			const statusDiv = document.getElementById('response-status');
			const bodyPre = document.getElementById('response-body');
			
			statusDiv.textContent = `${response.status} ${response.statusText}`;
			statusDiv.className = '';
			if (response.status === 200) statusDiv.classList.add('status-ok');
			else if (response.status === 201) statusDiv.classList.add('status-created');
			else if (response.status === 204) statusDiv.classList.add('status-no-content');
			else if (response.status >= 400) statusDiv.classList.add('status-error');

			const contentType = response.headers.get("content-type");
			if (contentType && contentType.includes("application/json")) {
				const jsonBody = await response.json();
				bodyPre.textContent = JSON.stringify(jsonBody, null, 2);
			} else {
				bodyPre.textContent = "No JSON body in response.";
			}
		}
	</script>

</body>
</html>